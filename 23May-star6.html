<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nomads Accounting - UK Tax & Crypto Tax Experts</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/phosphor-icons/1.4.2/css/phosphor.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500&family=Georgia&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', sans-serif;
      font-weight: 300;
      color: #ffffff;
    }

    p { /* Task A: Global Paragraph Styling */
      line-height: 1.6;
    }

    section > h2 { /* Task B: Section Heading Consistency */
      margin-bottom: 2.5rem;
    }

    body {
      background: #010102; 
      overflow-x: hidden;
    }

    /* Navigation */
    nav {
      position: sticky;
      top: 0;
      background: rgba(10, 10, 10, 0.8);
      backdrop-filter: blur(10px);
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 1000; 
    }

    nav ul {
      display: flex;
      list-style: none;
      gap: 2rem;
    }

    nav ul li a {
      text-decoration: none;
      font-size: 1rem;
      letter-spacing: -0.05em;
      opacity: 0.7;
      transition: opacity 0.3s;
    }

    nav ul li a:hover {
      opacity: 1;
    }

    nav .logo a {
        color: #ffffff; /* Assuming white is the desired color like other text */
        text-decoration: none;
        opacity: 1; /* Ensure it's fully opaque, or adjust if needed */
    }

    .burger {
      display: none;
      cursor: pointer;
      font-size: 1.5rem;
    }

    .mobile-menu {
      display: none;
    }

    .btn {
      padding: 0.8rem 1.5rem;
      background: #1a1a1a;
      border-radius: 12px;
      box-shadow: inset 4px 4px 8px rgba(0, 0, 0, 0.3), inset -4px -4px 8px rgba(255, 255, 255, 0.1);
      text-decoration: none;
      font-size: 1rem;
      opacity: 0.7;
      transition: all 0.3s;
      display: inline-block; /* Ensure button respects margins */
      margin-top: 1rem; /* Add some space if needed */
    }

    .btn:hover {
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
      opacity: 1;
    }

    .card {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: 2rem;
      margin: 1rem;
      transition: all 0.5s;
      display: flex; 
      flex-direction: column;
      justify-content: space-between; 
    }
    
    .card ul {
      list-style: none; /* Remove default bullet points */
      padding-left: 0; /* Remove default padding */
      margin-bottom: 1.5rem; /* Space before button */
      text-align: left; /* Align list items to the left */
    }

    .card ul li {
      margin-bottom: 0.5rem; /* Space between list items */
      display: flex; /* Align icon and text */
      align-items: flex-start; /* Align items to the start of the flex line */
    }

    .card ul li::before {
      content: '✓'; /* Checkmark icon */
      color: #00ccff; /* Icon color */
      margin-right: 0.5rem; /* Space between icon and text */
      font-weight: bold;
    }

    .card ul li.excluded-feature::before {
      content: '✕'; /* Unicode HEAVY MULTIPLICATION X */
      color: #ff7777; /* A slightly desaturated red, less harsh than pure red */
      font-weight: bold; /* Ensure the X is visually strong */
    }


    .animate-in {
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.6s forwards;
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .scroll-animate {
      opacity: 0;
      filter: blur(5px);
      transform: translateY(50px);
      transition: all 0.8s;
    }

    .scroll-animate.visible {
      opacity: 1;
      filter: blur(0);
      transform: translateY(0);
    }

    .hero {
      text-align: center;
      padding: 4rem 2rem; 
      min-height: 500px; 
      background: #010102; 
      position: relative; 
      overflow: hidden; 
      display: flex; 
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .hero h1,
    .hero p,
    .hero .btn {
      position: relative; 
      z-index: 2; 
      text-shadow: 0px 0px 12px rgba(0,0,0,0.7); /* Adjusted for readability */
    }
    
    .hero h1 {
      font-size: 3.5rem;
      letter-spacing: -0.08em;
      margin-bottom: 1rem;
    }

    .hero p {
      font-size: 1.2rem;
      opacity: 0.85; 
      margin-bottom: 2rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    .hero-canvas {
      width: 100%;  
      height: 100%; 
      position: absolute; 
      top: 0;
      left: 0;
      z-index: 0;     
    }

    .featured-in { background-color: #101013; padding: 2rem; text-align: center;}
    .testimonials { padding: 4rem 2rem; text-align: center; background-color: #010102; }
    .how-it-works { background-color: #101013; padding: 4rem 2rem; text-align: center;}
    .features { padding: 4rem 2rem; text-align: center; background-color: #010102; }
    .mission { background-color: #1a1a1a; padding: 4rem 2rem; text-align: center;}
    .pricing { padding: 4rem 2rem; text-align: center; background-color: #010102; }
    .faq { background-color: #101013; padding: 4rem 2rem; text-align: center;}
    footer { background-color: #1a1a1a; padding: 2rem; text-align: center; opacity: 0.8;} /* Task D: Footer Opacity */

    .featured-in img {
      height: 40px;
      margin: 0 1rem;
      opacity: 0.7;
      onerror: "this.style.display='none'";
    }
    .carousel {
      display: flex;
      overflow-x: auto;
      gap: 2rem;
      padding-bottom: 1rem; 
    }
    .carousel .card {
      min-width: 300px;
      flex-shrink: 0; 
    }
   .how-it-works .cards, .features .cards, .pricing .cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
    }
    .features .cards { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));}

    .recommended {
      position: relative;
    }
    .recommended::after {
      content: 'Recommended';
      position: absolute;
      top: -1rem;
      right: 1rem;
      background: #4a90e2;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      font-size: 0.9rem;
    }
    .faq details {
      margin: 1rem 0;
      text-align: left;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
      background: rgba(255, 255, 255, 0.03);
      padding: 1rem;
      border-radius: 8px;
    }
    .faq summary {
        cursor: pointer;
        font-weight: 500;
    }

    @media (max-width: 768px) {
      nav ul { display: none; }
      .burger { display: block; }
      .mobile-menu.active { display: block; position: fixed; top: 0; right: 0; width: 80%; height: 100%; background: rgba(10, 10, 10, 0.9); backdrop-filter: blur(10px); padding: 4rem 2rem; transform: translateX(0); transition: transform 0.3s ease-in-out; z-index: 999; }
      .mobile-menu { transform: translateX(100%); }
      .mobile-menu ul { flex-direction: column; gap: 1rem; }
      .hero h1 { font-size: 2.5rem; }
      .hero p { font-size: 1rem; }
      .hero { min-height: 400px; padding: 3rem 1rem; }
      .carousel .card { min-width: 280px; }
      .how-it-works .cards, .features .cards, .pricing .cards { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <nav>
    <div class="logo"><a href="#hero">Nomads Accounting</a></div>
    <ul>
      <li><a href="#hero">Home</a></li>
      <li><a href="#featured-in">Featured</a></li>
      <li><a href="#testimonials">Testimonials</a></li>
      <li><a href="#how-it-works">How It Works</a></li>
      <li><a href="#features">Features</a></li>
      <li><a href="#mission">Mission</a></li>
      <li><a href="#pricing">Pricing</a></li>
      <li><a href="#faq">FAQ</a></li>
    </ul>
    <div class="burger" id="mobileMenuButton" role="button" aria-label="Open menu" aria-expanded="false" aria-controls="mobileNavMenu"><i class="ph-list"></i></div>
    <div class="mobile-menu" id="mobileNavMenu">
      <ul>
        <li><a href="#hero">Home</a></li>
        <li><a href="#featured-in">Featured</a></li>
        <li><a href="#testimonials">Testimonials</a></li>
        <li><a href="#how-it-works">How It Works</a></li>
        <li><a href="#features">Features</a></li>
        <li><a href="#mission">Mission</a></li>
        <li><a href="#pricing">Pricing</a></li>
        <li><a href="#faq">FAQ</a></li>
      </ul>
    </div>
  </nav>
  
  <section id="hero" class="hero animate-in">
    <div id="hologram" class="hero-canvas"></div> 
    <h1>Expert UK Tax & Crypto Tax Solutions</h1>
    <p>Simplify your tax obligations with Nomads Accounting, tailored for UK residents and crypto investors.</p>
    <a href="#pricing" class="btn">Get Started</a>
  </section>
  
  <section id="consultation-booking" class="scroll-animate" style="text-align: center; padding: 4rem 2rem; background-color: #010102;">
    <h2 style="margin-bottom: 2.5rem;">Book Your Consultation</h2>
    <a href="https://calendar.google.com/calendar/u/0/appointments/schedules/AcZssZ1PhBqLFpaUdk0CTeILr7DVH3HnZuPaDhfOkFvHy7epmll8D1V7mU7mN7f_aMqvA4ndErQNYXvJ?gv=true" class="btn" target="_blank" rel="noopener noreferrer">Book Your Consultation Now only $99</a>
  </section>

  <section id="testimonials" class="testimonials scroll-animate">
    <h2>Client Success Stories</h2>
    <div class="carousel">
      <div class="card">
        <p>"Nomads Accounting saved me hours on my crypto tax calculations!"</p>
        <p><strong>Result:</strong> Reduced tax liability by £5,000</p>
        <p>- Jane D.</p>
      </div>
      <div class="card">
        <p>"Their UK tax expertise is unmatched, especially for self-employed nomads."</p>
        <p><strong>Result:</strong> Maximized deductions, saved £3,200</p>
        <p>- Mark S.</p>
      </div>
      <div class="card">
        <p>"Stress-free crypto tax reporting, highly recommend!"</p>
        <p><strong>Result:</strong> Compliant filing, saved £4,800</p>
        <p>- Sarah L.</p>
      </div>
       <div class="card">
        <p>"Navigating DeFi taxes was a nightmare until I found them."</p>
        <p><strong>Result:</strong> Clear reporting, peace of mind!</p>
        <p>- Alex P.</p>
      </div>
    </div>
  </section>

  <section id="how-it-works" class="how-it-works scroll-animate">
    <h2>How It Works</h2>
    <div class="cards">
      <div class="card">
        <i class="ph-wallet-light ph-2x" style="font-size: 2.5rem; margin-bottom: 0.5rem; color: #00ccff;"></i>
        <h3>Connect Your Accounts</h3>
        <p>Link your crypto wallets and financial accounts securely.</p>
      </div>
      <div class="card">
        <i class="ph-chart-line-up-light ph-2x" style="font-size: 2.5rem; margin-bottom: 0.5rem; color: #00ccff;"></i>
        <h3>Expert Analysis</h3>
        <p>Our specialists review your transactions and optimize for UK/crypto tax.</p>
      </div>
      <div class="card">
        <i class="ph-file-text-light ph-2x" style="font-size: 2.5rem; margin-bottom: 0.5rem; color: #00ccff;"></i>
        <h3>File with Confidence</h3>
        <p>We handle your tax filings, ensuring compliance and savings.</p>
      </div>
    </div>
  </section>

  <section id="features" class="features scroll-animate">
    <h2>Our Services</h2>
    <div class="cards">
      <div class="card">
        <i class="ph-coins-light ph-2x" style="font-size: 2.5rem; margin-bottom: 0.5rem; color: #00ccff;"></i>
        <h3>Crypto Tax Reporting</h3>
        <p>Accurate calculations for UK crypto tax obligations, including DeFi & NFTs.</p>
      </div>
      <div class="card">
        <i class="ph-briefcase-light ph-2x" style="font-size: 2.5rem; margin-bottom: 0.5rem; color: #00ccff;"></i>
        <h3>Self-Assessment Filing</h3>
        <p>Streamlined UK self-assessment tax services for individuals and businesses.</p>
      </div>
      <div class="card">
        <i class="ph-shield-check-light ph-2x" style="font-size: 2.5rem; margin-bottom: 0.5rem; color: #00ccff;"></i>
        <h3>HMRC Compliance</h3>
        <p>Ensure full compliance with the latest UK tax regulations and HMRC guidelines.</p>
      </div>
    </div>
  </section>

  <section id="mission" class="mission scroll-animate">
    <h2>Our Mission</h2>
    <p>At Nomads Accounting, we empower UK residents and crypto investors to navigate the complexities of tax compliance with ease. Our mission is to provide transparent, expert-led accounting services that maximize savings and ensure peace of mind in the evolving digital economy.</p>
  </section>

  <section id="pricing" class="pricing scroll-animate">
    <h2>Pricing Plans</h2>
    <div class="cards">
      <div class="card">
        <h3>Platinum</h3>
        <p style="font-size: 2rem; font-weight: 500; margin-bottom: 0.5rem;">$399</p>
        <p style="font-size: 0.9rem; opacity: 0.7; margin-bottom: 1.5rem;">Per month</p>
        <ul>
          <li>Company accounts and tax returns produced and submitted to HMRC and Companies House</li>
          <li>VAT returns (where applicable)</li>
          <li>Payroll for employees</li>
          <li>Management reports</li>
          <li>Ongoing advice</li>
          <li>Dealing with HMRC letters</li>
          <li>Tax advice</li>
          <li>Tailored to support your business needs</li>
          <li class="excluded-feature">30-min Private Banker vid calls/month (inclusive of Financial Planning & Analysis and Capital Strategy consulting)</li>
          <li class="excluded-feature">Virtual CFO - Access your own dedicated & experienced chartered accountant for advice (via email/text)</li>
        </ul>
        <a href="#" class="btn" style="margin-top: auto;">Choose Plan</a>
      </div>
      <div class="card recommended">
        <h3>Titanium</h3>
        <p style="font-size: 2rem; font-weight: 500; margin-bottom: 0.5rem;">$599</p>
        <p style="font-size: 0.9rem; opacity: 0.7; margin-bottom: 1.5rem;">Per month</p>
        <ul>
          <li>Company accounts and tax returns produced and submitted to HMRC and Companies House</li>
          <li>VAT returns (where applicable)</li>
          <li>Payroll for employees</li>
          <li>Management reports</li>
          <li>Ongoing advice</li>
          <li>Dealing with HMRC letters</li>
          <li>Tax advice</li>
          <li>Tailored to support your business needs</li>
          <li>30-min Private Banker vid calls/month (inclusive of Financial Planning & Analysis and Capital Strategy consulting)</li>
          <li>Virtual CFO - Access your own dedicated & experienced chartered accountant for advice (via email/text)</li>
        </ul>
        <a href="#" class="btn" style="margin-top: auto;">Choose Plan</a>
      </div>
      <div class="card">
        <h3>Diamond</h3>
        <p style="font-size: 2rem; font-weight: 500; margin-bottom: 0.5rem;">$1999</p>
        <p style="font-size: 0.9rem; opacity: 0.7; margin-bottom: 1.5rem;">Per month</p>
        <ul>
          <li>Company accounts and tax returns produced and submitted to HMRC and Companies House</li>
          <li>VAT returns (where applicable)</li>
          <li>Payroll for employees</li>
          <li>Management reports</li>
          <li>Ongoing advice</li>
          <li>Dealing with HMRC letters</li>
          <li>Tax advice</li>
          <li>Tailored to support your business needs</li>
          <li>1hr Private Banker vid calls/weeks (inclusive of Financial Planning & Analysis and Capital Strategy consulting)</li>
          <li>Virtual CFO - Access your own dedicated & experienced chartered accountant for advice (via email/text) Tailored to support your business needs</li>
        </ul>
        <a href="#" class="btn" style="margin-top: auto;">Contact Us</a>
      </div>
    </div>
  </section>

  <section id="faq" class="faq scroll-animate">
    <h2>Frequently Asked Questions</h2>
    <details>
      <summary>How do you calculate crypto taxes for the UK?</summary>
      <p>We follow HMRC guidelines, calculating Capital Gains Tax (CGT) on disposals of cryptoassets. This includes sales for fiat, exchanges for other crypto, and using crypto to pay for goods/services. We also account for income tax on activities like mining or staking where applicable.</p>
    </details>
    <details>
      <summary>Do you support DeFi and NFT tax calculations?</summary>
      <p>Yes, our Pro Crypto and Business plans include support for complex DeFi transactions (liquidity pools, lending, yield farming) and NFT taxation, which can be particularly nuanced.</p>
    </details>
    <details>
      <summary>Can you help with late tax filings or amendments?</summary>
      <p>Absolutely. We can assist with preparing and submitting late tax returns and help amend previous filings if errors are discovered. We can also advise on potential penalties and how to communicate with HMRC.</p>
    </details>
    <details>
      <summary>Is my financial and crypto data secure with you?</summary>
      <p>Data security is paramount. We use industry-standard encryption and secure protocols to protect your financial and personal information. We only require read-access to your exchange/wallet data where possible.</p>
    </details>
  </section>

  <footer>
    <p>© 2025 Nomads Accounting. All rights reserved. UK Registered Company 12345678.</p>
  </footer>

  <script>
    // Mobile menu toggle
    const burgerButton = document.getElementById('mobileMenuButton'); // Use ID selector
    const mobileMenu = document.getElementById('mobileNavMenu'); // Use ID selector
    const navLinks = document.querySelectorAll('.mobile-menu a'); 

    burgerButton.addEventListener('click', () => {
      mobileMenu.classList.toggle('active');
      const icon = burgerButton.querySelector('i');
      if (mobileMenu.classList.contains('active')) {
        icon.classList.remove('ph-list');
        icon.classList.add('ph-x');
        burgerButton.setAttribute('aria-expanded', 'true');
        burgerButton.setAttribute('aria-label', 'Close menu');
      } else {
        icon.classList.remove('ph-x');
        icon.classList.add('ph-list');
        burgerButton.setAttribute('aria-expanded', 'false');
        burgerButton.setAttribute('aria-label', 'Open menu');
      }
    });

    navLinks.forEach(link => {
      link.addEventListener('click', () => {
        if (mobileMenu.classList.contains('active')) {
          mobileMenu.classList.remove('active');
          const icon = burgerButton.querySelector('i'); // Ensure icon updates correctly
          icon.classList.remove('ph-x');
          icon.classList.add('ph-list');
          burgerButton.setAttribute('aria-expanded', 'false');
          burgerButton.setAttribute('aria-label', 'Open menu');
        }
      });
    });


    // Scroll animations
    const scrollElements = document.querySelectorAll('.scroll-animate');
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, { threshold: 0.1 }); 

    scrollElements.forEach(el => observer.observe(el));

    // Three.js Hologram
    const hologramContainer = document.getElementById('hologram'); 
    
    let scene, camera, renderer; // Core Three.js variables for galaxy
    let galaxyParticles; // For the starfield

    // Helper Functions (will be added in next step)

    function initThreeJS() {
        scene = new THREE.Scene();
        
        camera = new THREE.PerspectiveCamera(75, hologramContainer.clientWidth / hologramContainer.clientHeight, 0.1, 1000); 
        camera.position.set(0, 3, 15); // Adjust Y for tilt, Z for distance
        camera.lookAt(new THREE.Vector3(0, 0, 0)); // Look at the center of the galaxy
        
        renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true }); 
        renderer.setSize(hologramContainer.clientWidth, hologramContainer.clientHeight);
        renderer.outputEncoding = THREE.sRGBEncoding; 
        renderer.toneMapping = THREE.ACESFilmicToneMapping; // Consider if still needed for galaxy
        renderer.toneMappingExposure = 1.35; // Consider if still needed for galaxy
        hologramContainer.appendChild(renderer.domElement); 

        // Lighting setup (can be adjusted or simplified for the galaxy later)
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.6); // Adjusted intensity
        scene.add(ambientLight);
        
        // Starfield Particle System
        const particleCount = 25000; // Increased particle count
        const galaxyRadius = 25;
        const galaxyThickness = 2;
        const spiralArms = 3;
        const armAngleSeparation = (2 * Math.PI) / spiralArms;
        const armCurl = 1.5;
        const particleSize = 0.1;

        const positions = new Float32Array(particleCount * 3);
        const colors = new Float32Array(particleCount * 3);
        const sizes = new Float32Array(particleCount);

        const colorInside = new THREE.Color("#FFDDBB");
        const colorOutside = new THREE.Color("#AADDFF");

        for (let i = 0; i < particleCount; i++) {
            const r = Math.random() * galaxyRadius;
            const spinAngle = r * armCurl;
            const branchAngle = (i % spiralArms) * armAngleSeparation;

            const randomX = (Math.random() - 0.5) * 0.5 * (galaxyRadius - r) / galaxyRadius;
            const randomY = (Math.random() - 0.5) * 0.2 * (galaxyRadius - r) / galaxyRadius;
            const randomZ = (Math.random() - 0.5) * 0.5 * (galaxyRadius - r) / galaxyRadius;

            const x = Math.cos(branchAngle + spinAngle) * r + randomX;
            const z = Math.sin(branchAngle + spinAngle) * r + randomZ;
            const y = (Math.random() - 0.5) * galaxyThickness * (1 - r / (galaxyRadius * 1.5)) + randomY;

            positions[i * 3] = x;
            positions[i * 3 + 1] = y;
            positions[i * 3 + 2] = z;

            const mixedColor = colorInside.clone();
            mixedColor.lerp(colorOutside, r / galaxyRadius);
            colors[i * 3] = mixedColor.r;
            colors[i * 3 + 1] = mixedColor.g;
            colors[i * 3 + 2] = mixedColor.b;

            sizes[i] = (Math.random() * 0.5 + 0.5) * particleSize * (1 + (galaxyRadius - r) * 0.05);
        }

        const starGeometry = new THREE.BufferGeometry();
        starGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        starGeometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
        starGeometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));

        const starMaterial = new THREE.ShaderMaterial({
            uniforms: {
                pointTexture: { value: new THREE.TextureLoader().load('https://threejs.org/examples/textures/sprites/spark1.png') },
                time: { value: 0.0 } // Add this time uniform
            },
            vertexShader: `
                attribute float size;
                varying vec3 vColor;
                void main() {
                    vColor = color;
                    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
                    gl_PointSize = size * (300.0 / -mvPosition.z); // Size attenuation
                    gl_Position = projectionMatrix * mvPosition;
                }
            `,
            fragmentShader: `
                uniform sampler2D pointTexture;
                varying vec3 vColor;

                // Basic pseudo-random function (if needed in FS, otherwise can be removed if only FS uses it)
                // float rand(vec2 co){
                //    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
                // }

                float pseudoRandom(vec3 seed) {
                    return fract(sin(dot(seed.xyz, vec3(12.9898, 78.233, 45.543))) * 43758.5453123);
                }

                void main() {
                    float baseAlpha = texture2D(pointTexture, gl_PointCoord).a;
                    
                    // Simple twinkle based on a pseudo-random value derived from vColor (which is somewhat unique per particle)
                    // and time.
                    float randomFactor = pseudoRandom(vColor + vec3(0.1,0.2,0.3)); // Offset vColor to ensure it's not zero
                    float twinkleValue = 0.7 + 0.3 * sin(time * (1.0 + randomFactor * 2.0) + randomFactor * 6.28318); // Modulate between 0.7 and 1.0
                    
                    gl_FragColor = vec4(vColor, baseAlpha * twinkleValue);
                }
            `,
            blending: THREE.AdditiveBlending,
            depthWrite: false,
            transparent: true,
            vertexColors: true
        });

        galaxyParticles = new THREE.Points(starGeometry, starMaterial);
        galaxyParticles.rotation.x = -Math.PI / 12; // Slight tilt
        scene.add(galaxyParticles);

        // Nebulosity
        const nebulaTextureUrl = 'https://threejs.org/examples/textures/clouds.png';
        const nebulaTexture = new THREE.TextureLoader().load(nebulaTextureUrl);
        nebulaTexture.wrapS = THREE.RepeatWrapping;
        nebulaTexture.wrapT = THREE.RepeatWrapping;
        nebulaTexture.repeat.set(1, 1);

        const nebulaMaterial = new THREE.MeshBasicMaterial({
            map: nebulaTexture,
            color: new THREE.Color(0.3, 0.2, 0.5), // Purplish hue
            transparent: true,
            opacity: 0.12, // Slightly increased opacity
            blending: THREE.AdditiveBlending,
            depthWrite: false,
            side: THREE.DoubleSide
        });

        const nebulaPlane1 = new THREE.Mesh(new THREE.PlaneGeometry(galaxyRadius * 3, galaxyRadius * 3), nebulaMaterial);
        nebulaPlane1.rotation.x = Math.PI / 2;
        nebulaPlane1.position.y = -galaxyThickness * 0.5;
        scene.add(nebulaPlane1);

        const nebulaMaterial2 = nebulaMaterial.clone();
        nebulaMaterial2.color.setRGB(0.2, 0.3, 0.6); // Bluish hue
        nebulaMaterial2.opacity = 0.09; // Slightly increased opacity
        const nebulaPlane2 = new THREE.Mesh(new THREE.PlaneGeometry(galaxyRadius * 2.5, galaxyRadius * 2.5), nebulaMaterial2);
        nebulaPlane2.rotation.x = Math.PI / 2.2;
        nebulaPlane2.position.y = galaxyThickness * 0.3;
        nebulaPlane2.position.z = -5;
        scene.add(nebulaPlane2);
    }


    function animate() {
      if (renderer && scene && camera) { // Simplified check
        requestAnimationFrame(animate);
        
        if (galaxyParticles) {
            if (galaxyParticles.material.uniforms.time) { // Check if time uniform exists
                 galaxyParticles.material.uniforms.time.value = Date.now() * 0.0005; // Update time
            }
            galaxyParticles.rotation.y += 0.0001; // Very slow rotation
        }
        // Nebula animation could be added here

        renderer.render(scene, camera);
      }
    }
    
    function onWindowResize() {
        if (camera && renderer && hologramContainer) {
            const width = hologramContainer.clientWidth;
            const height = hologramContainer.clientHeight;
            
            if (width > 0 && height > 0) { 
                camera.aspect = width / height;
                camera.updateProjectionMatrix();
                renderer.setSize(width, height);
            }
        }
    }

    window.addEventListener('load', () => {
        if (hologramContainer) { 
            initThreeJS();
            onWindowResize(); 
            animate(); 
            window.addEventListener('resize', onWindowResize, false);
        } else {
            console.error("Hero canvas container 'hologram' not found.");
        }
    });

  </script>
</body>
</html>